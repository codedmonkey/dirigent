{% extends '@EasyAdmin/page/content.html.twig' %}

{% block page_title %}{{ package.name }}{% endblock %}

{% block search_wrapper %}
  {% include 'dashboard/packages/search_box.html.twig' with {searchAutofocus: false} %}
{% endblock %}

{% block page_content %}
  {% include 'dashboard/packages/package_header.html.twig' with {currentPage: 'statistics'} %}

  <div class="mb-3">
    <h2>{{ 'Installations'|trans }}</h2>
    <div class="row">
      <div class="col-md-4">
        <div class="card mb-2">
          <div class="card-body">
            <div>{{ 'Total'|trans }}:</div>
            <div class="display-6">{{ installationsTotal|number_format(thousandSep: ' ') }}</div>
          </div>
        </div>
      </div>
      <div class="col-md-4">
        <div class="card mb-2">
          <div class="card-body">
            <div>{{ 'Last 30 days'|trans }}:</div>
            <div class="display-6">{{ installationsLast30Days|number_format(thousandSep: ' ') }}</div>
          </div>
        </div>
      </div>
      <div class="col-md-4">
        <div class="card mb-2">
          <div class="card-body">
            <div>{{ 'Today'|trans }}:</div>
            <div class="display-6">{{ installationsToday|number_format(thousandSep: ' ') }}</div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <div class="mb-3">
    <h2>{{ 'Daily installations'|trans }}</h2>
    <div
      data-controller="chart"
      data-chart-data-value="{{ package.installations.data ? package.installations.data|json_encode|escape : '{}' }}"
      data-chart-type-value="daily"
    >
      <canvas data-chart-target="canvas"></canvas>
    </div>
  </div>

  <div>
    <h2>{{ 'Daily installations per version'|trans }}</h2>
    <div
      data-controller="chart"
      data-chart-data-value="{{ versionInstallationsData|json_encode|escape }}"
      data-chart-type-value="daily-versions"
    >
      <canvas data-chart-target="canvas"></canvas>
    </div>
  </div>
{% endblock %}
